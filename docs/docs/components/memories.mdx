import Admonition from "@theme/Admonition";

# Memories

<Admonition type="caution" icon="üöß" title="ZONE UNDER CONSTRUCTION">
  <p>
    Thanks for your patience as we improve our documentation‚Äîit might have some
    rough edges. Share your feedback or report issues to help us enhance it!
    üõ†Ô∏èüìù
  </p>
</Admonition>

Memory is a concept in chat-based applications that allows the system to remember previous interactions. This capability helps maintain the context of the conversation and enables the system to understand new messages in light of past messages.

---

### MessageHistory

This component retrieves stored messages using various filters such as sender type, sender name, session ID, and the specific file path where messages are stored. It offers flexible retrieval of chat history, providing insights into past interactions.

**Parameters**

- **sender_type** (optional): Specifies the sender's type. Options include `"Machine"`, `"User"`, or `"Machine and User"`. Filters messages by the sender type.
- **sender_name** (optional): Specifies the sender's name. Filters messages by the sender's name.
- **session_id** (optional): Specifies the session ID of the chat history. Filters messages by session.
- **number_of_messages**: Specifies the number of messages to retrieve. Defaults to `5`. Determines the number of recent messages from the chat history to fetch.

<Admonition type="note" title="Note">
  <p>
    The component retrieves messages based on the provided criteria, including
    the specific file path for stored messages. If no specific criteria are
    provided, it returns the most recent messages up to the specified limit.
    This component can be used to review past interactions and analyze
    conversation flows.
  </p>
</Admonition>

### ConversationBufferMemory

The `ConversationBufferMemory` component stores the last few inputs and outputs of a conversation.

**Parameters**

- **input_key**: Specifies the key under which the user input will be stored in the conversation memory.
- **memory_key**: Specifies the prompt variable name where the memory will store and retrieve chat messages. Defaults to `chat_history`.
- **output_key**: Specifies the key under which the generated response will be stored.
- **return_messages**: Determines whether the history should be returned as a string or as a list of messages. The default is `False`.

---

### ConversationBufferWindowMemory

`ConversationBufferWindowMemory` is a variant of the `ConversationBufferMemory` that keeps only the last K interactions in memory. It's useful for maintaining a sliding window of recent interactions without letting the buffer get too large.

**Parameters**

- **input_key**: Specifies the keys in the memory object where input messages are stored.
- **memory_key**: Specifies the prompt variable name for storing and retrieving chat messages. Defaults to `chat_history`.
- **k**: Specifies the number of interactions or messages to be stored in the conversation buffer.
- **output_key**: Specifies the key under which the generated response will be stored.
- **return_messages**: Determines whether the history should be returned as a string or as a list of messages. The default is `False`.

---

### ConversationEntityMemory

The `ConversationEntityMemory` component uses a key-value store to manage entities mentioned in conversations. This structure enhances the storage and retrieval of information about specific entities.

**Parameters**

- **entity_store**: A structure that stores information about entities mentioned in a conversation.
- **LLM**: Specifies the language model used in the `ConversationEntityMemory`.
- **chat_history_key**: A unique identifier for the chat history data associated with a particular entity. This key helps organize and access chat history data for each entity within the memory. Defaults to `history`.
- **input_key**: Identifies where input messages are stored in the memory object, allowing for their retrieval and manipulation.
- **k**: Specifies the maximum number of entities that can be stored and retrieved from the memory. Defaults to `10`.
- **output_key**: Identifies the key under which the generated response is stored, enabling retrieval using this key.
- **return_messages**: Controls whether the history is returned as a string or as a list of messages. Defaults to `False`.

---

### ConversationKGMemory

The `ConversationKGMemory` utilizes a knowledge graph to enhance memory capabilities. It extracts entities and knowledge triplets from new messages, using previous messages as context.

**Parameters**

- **LLM**: Specifies the language model used in the `ConversationKGMemory`.
- **input_key**: Identifies where input messages are stored in the memory object, facilitating their retrieval and manipulation.
- **k**: Indicates the number of previous conversation turns stored in memory, allowing the model to utilize information from these turns. Defaults to `10`.
- **memory_key**: Specifies the prompt variable name where the memory stores and retrieves chat messages. Defaults to `chat_history`.
- **output_key**: Identifies the key under which the generated response

is stored, enabling retrieval using this key.

- **return_messages**: Controls whether the history is returned as a string or as a list of messages. Defaults to `False`.

---

### ConversationSummaryMemory

The `ConversationSummaryMemory` summarizes conversations over time, condensing information and storing it efficiently. It's particularly useful for long conversations.

**Parameters**

- **LLM**: Specifies the language model used in the `ConversationSummaryMemory`.
- **input_key**: Identifies where input messages are stored in the memory object, facilitating their retrieval and manipulation.
- **memory_key**: Specifies the prompt variable name where the memory stores and retrieves chat messages. Defaults to `chat_history`.
- **output_key**: Identifies the key under which the generated response is stored, enabling retrieval using this key.
- **return_messages**: Controls whether the history is returned as a string or as a list of messages. Defaults to `False`.

---

### PostgresChatMessageHistory

The `PostgresChatMessageHistory` component uses a PostgreSQL database to store and retrieve chat message history.

**Parameters**

- **connection_string**: Specifies the details needed to connect to the PostgreSQL database, including username, password, host, port, and database name. Defaults to `postgresql://postgres:mypassword@localhost/chat_history`.
- **session_id**: A unique identifier used to link chat message history with a specific session or conversation.
- **table_name**: The name of the PostgreSQL database table where chat message history is stored. Defaults to `message_store`.

---

### VectorRetrieverMemory

The `VectorRetrieverMemory` retrieves vectors based on queries, facilitating vector-based searches and retrievals.

**Parameters**

- **Retriever**: The tool used to fetch documents.
- **input_key**: Identifies where input messages are stored in the memory object, facilitating their retrieval and manipulation.
- **memory_key**: Specifies the prompt variable name where the memory stores and retrieves chat messages. Defaults to `chat_history`.
- **return_messages**: Controls whether the history is returned as a string or as a list of messages. Defaults to `False`.
